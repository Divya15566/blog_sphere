{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate,Link}from'react-router-dom';import axios from'axios';import{FontAwesomeIcon}from'@fortawesome/react-fontawesome';import{faEdit,faTrash,faArrowLeft}from'@fortawesome/free-solid-svg-icons';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BlogScreen=()=>{const{id}=useParams();const navigate=useNavigate();const[blog,setBlog]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[userInfo,setUserInfo]=useState(null);const[isDeleting,setIsDeleting]=useState(false);useEffect(()=>{const fetchBlog=async()=>{try{const{data}=await axios.get(`/api/blogs/${id}`);setBlog(data);const token=localStorage.getItem('token');if(token){const config={headers:{'x-auth-token':token}};const{data:userData}=await axios.get('/api/users/me',config);setUserInfo(userData);}}catch(err){var _err$response,_err$response$data;setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.msg)||'Error fetching blog');}finally{setLoading(false);}};fetchBlog();},[id]);const handleDelete=async()=>{if(!window.confirm('Are you sure you want to delete this post?'))return;try{setIsDeleting(true);const token=localStorage.getItem('token');await axios.delete(`/api/blogs/${id}`,{headers:{'x-auth-token':token}});navigate('/');}catch(err){setError('Failed to delete post. Please try again.');}finally{setIsDeleting(false);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500\"})});if(error)return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded max-w-md\",children:error})});return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(-1),className:\"mb-6 flex items-center text-indigo-600 hover:text-indigo-800 transition-colors\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faArrowLeft,className:\"mr-2\"}),\"Back to posts\"]}),/*#__PURE__*/_jsx(\"article\",{className:\"bg-white shadow-xl rounded-lg overflow-hidden\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"h-12 w-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-medium mr-4\",children:blog.author.email.charAt(0).toUpperCase()}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-medium text-gray-900\",children:blog.author.email}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500\",children:new Date(blog.createdAt).toLocaleDateString('en-US',{year:'numeric',month:'long',day:'numeric'})})]})]}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900 mb-4\",children:blog.title}),/*#__PURE__*/_jsx(\"div\",{className:\"prose max-w-none text-gray-700 mb-8\",children:blog.content.split('\\n').map((paragraph,i)=>/*#__PURE__*/_jsx(\"p\",{className:\"mb-4\",children:paragraph},i))}),userInfo&&userInfo._id===blog.author._id&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-4 border-t pt-6\",children:[/*#__PURE__*/_jsxs(Link,{to:`/edit/${blog._id}`,className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faEdit,className:\"mr-2\"}),\"Edit Post\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDelete,disabled:isDeleting,className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50\",children:isDeleting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Deleting...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(FontAwesomeIcon,{icon:faTrash,className:\"mr-2\"}),\"Delete Post\"]})})]})]})})]})});};export default BlogScreen;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Link","axios","FontAwesomeIcon","faEdit","faTrash","faArrowLeft","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BlogScreen","id","navigate","blog","setBlog","loading","setLoading","error","setError","userInfo","setUserInfo","isDeleting","setIsDeleting","fetchBlog","data","get","token","localStorage","getItem","config","headers","userData","err","_err$response","_err$response$data","response","msg","handleDelete","window","confirm","delete","className","children","onClick","icon","author","email","charAt","toUpperCase","Date","createdAt","toLocaleDateString","year","month","day","title","content","split","map","paragraph","i","_id","to","disabled","xmlns","fill","viewBox","cx","cy","r","stroke","strokeWidth","d"],"sources":["C:/Users/divya/blog-app/client/src/screens/BlogScreen.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate, Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faEdit, faTrash, faArrowLeft } from '@fortawesome/free-solid-svg-icons';\r\n\r\nconst BlogScreen = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [blog, setBlog] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [userInfo, setUserInfo] = useState(null);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchBlog = async () => {\r\n      try {\r\n        const { data } = await axios.get(`/api/blogs/${id}`);\r\n        setBlog(data);\r\n        \r\n        const token = localStorage.getItem('token');\r\n        if (token) {\r\n          const config = { headers: { 'x-auth-token': token } };\r\n          const { data: userData } = await axios.get('/api/users/me', config);\r\n          setUserInfo(userData);\r\n        }\r\n      } catch (err) {\r\n        setError(err.response?.data?.msg || 'Error fetching blog');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchBlog();\r\n  }, [id]);\r\n\r\n  const handleDelete = async () => {\r\n    if (!window.confirm('Are you sure you want to delete this post?')) return;\r\n    \r\n    try {\r\n      setIsDeleting(true);\r\n      const token = localStorage.getItem('token');\r\n      await axios.delete(`/api/blogs/${id}`, {\r\n        headers: { 'x-auth-token': token }\r\n      });\r\n      navigate('/');\r\n    } catch (err) {\r\n      setError('Failed to delete post. Please try again.');\r\n    } finally {\r\n      setIsDeleting(false);\r\n    }\r\n  };\r\n\r\n  if (loading) return (\r\n    <div className=\"min-h-screen flex items-center justify-center\">\r\n      <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500\"></div>\r\n    </div>\r\n  );\r\n\r\n  if (error) return (\r\n    <div className=\"min-h-screen flex items-center justify-center\">\r\n      <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded max-w-md\">\r\n        {error}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\r\n        <button\r\n          onClick={() => navigate(-1)}\r\n          className=\"mb-6 flex items-center text-indigo-600 hover:text-indigo-800 transition-colors\"\r\n        >\r\n          <FontAwesomeIcon icon={faArrowLeft} className=\"mr-2\" />\r\n          Back to posts\r\n        </button>\r\n        \r\n        <article className=\"bg-white shadow-xl rounded-lg overflow-hidden\">\r\n          <div className=\"p-8\">\r\n            <div className=\"flex items-center mb-6\">\r\n              <div className=\"h-12 w-12 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600 font-medium mr-4\">\r\n                {blog.author.email.charAt(0).toUpperCase()}\r\n              </div>\r\n              <div>\r\n                <h2 className=\"text-lg font-medium text-gray-900\">{blog.author.email}</h2>\r\n                <p className=\"text-sm text-gray-500\">\r\n                  {new Date(blog.createdAt).toLocaleDateString('en-US', {\r\n                    year: 'numeric',\r\n                    month: 'long',\r\n                    day: 'numeric'\r\n                  })}\r\n                </p>\r\n              </div>\r\n            </div>\r\n            \r\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-4\">{blog.title}</h1>\r\n            \r\n            <div className=\"prose max-w-none text-gray-700 mb-8\">\r\n              {blog.content.split('\\n').map((paragraph, i) => (\r\n                <p key={i} className=\"mb-4\">{paragraph}</p>\r\n              ))}\r\n            </div>\r\n            \r\n            {userInfo && userInfo._id === blog.author._id && (\r\n              <div className=\"flex space-x-4 border-t pt-6\">\r\n                <Link\r\n                  to={`/edit/${blog._id}`}\r\n                  className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                >\r\n                  <FontAwesomeIcon icon={faEdit} className=\"mr-2\" />\r\n                  Edit Post\r\n                </Link>\r\n                <button\r\n                  onClick={handleDelete}\r\n                  disabled={isDeleting}\r\n                  className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50\"\r\n                >\r\n                  {isDeleting ? (\r\n                    <>\r\n                      <svg className=\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\r\n                        <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                        <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                      </svg>\r\n                      Deleting...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <FontAwesomeIcon icon={faTrash} className=\"mr-2\" />\r\n                      Delete Post\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </article>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlogScreen;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}